import{e as Y,r as w,B as ae,L as le,t as J,h as f,j as M,a as T,ai as ge,c as D,aj as ye,b as P,d as be,ak as he,al as we,am as xe,an as _e,ao as ne,ap as ke,q as Ce,aq as Te,u as Ne,f as ue,o as de,ar as Se,g as Ee,as as $e,at as Oe,au as Ie,s as Z,v as te,w as A,P as me,C as Me,D as i,E as l,F as e,K as $,J as E,a1 as pe,Y as Q,Z as h,$ as I,a0 as G,A as Ae,G as R,Q as Ue,M as Re}from"./index-BsKuKuBe.js";import{p as se}from"./player-DBNXbDlS.js";import{N as fe}from"./DataTable-D5mRR0cm.js";import{A as ce}from"./AddOutline-DAXbjVCv.js";import{C as ze}from"./CreateOutline-CbXbgX50.js";import{T as Pe}from"./TrashOutline-A99Fg1Y4.js";import{u as De}from"./composables-FnfCle_S.js";import{N as Be,a as Ve}from"./DrawerContent-Dys-I5Rb.js";import{N as ee}from"./Tag-I3_cH6qL.js";import{N as X}from"./Switch-DXNn_bI_.js";import{N as ve}from"./Space-Cf9Hs1lp.js";import{N as j}from"./Radio-C5fS5KPL.js";import{N as re}from"./DatePicker-CVYfnur-.js";import{S as Ye}from"./SearchOutline-tjJoWZeT.js";import{N as Fe}from"./InputNumber-BMu_ZOnr.js";import{g as Le,N as W}from"./Select-CCDzjsmj.js";import{L as qe,G as je}from"./ListOutline-lyFo3EnI.js";import{N as ie}from"./RadioGroup-CgIVku-C.js";import"./bonus-WzX8Tgz6.js";import"./assetLogs-Dslkok5U.js";import"./Tooltip-XZFA5Owl.js";import"./Popover-CfBNgOAF.js";import"./use-compitable-BjMNwQgq.js";import"./Dropdown-CcmdnIk3.js";import"./Icon-CbayTH31.js";import"./create-Bj8PAPmY.js";import"./use-keyboard-kkRvbDTj.js";import"./create-ref-setter-C4J8sofl.js";import"./Empty-DtuLCoXR.js";import"./Pagination-BLbp2o8H.js";import"./Forward-CBwL8ab_.js";import"./Add-BJRbFrfV.js";const oe=Y({name:"SlotMachineNumber",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],required:!0},oldOriginalNumber:{type:Number,default:void 0},newOriginalNumber:{type:Number,default:void 0}},setup(s){const m=w(null),o=w(s.value),a=w(s.value),r=w("up"),c=w(!1),N=M(()=>c.value?`${s.clsPrefix}-base-slot-machine-current-number--${r.value}-scroll`:null),S=M(()=>c.value?`${s.clsPrefix}-base-slot-machine-old-number--${r.value}-scroll`:null);ae(J(s,"value"),(v,b)=>{o.value=b,a.value=v,le(U)});function U(){const v=s.newOriginalNumber,b=s.oldOriginalNumber;b===void 0||v===void 0||(v>b?C("up"):b>v&&C("down"))}function C(v){r.value=v,c.value=!1,le(()=>{var b;(b=m.value)===null||b===void 0||b.offsetWidth,c.value=!0})}return()=>{const{clsPrefix:v}=s;return f("span",{ref:m,class:`${v}-base-slot-machine-number`},o.value!==null?f("span",{class:[`${v}-base-slot-machine-old-number ${v}-base-slot-machine-old-number--top`,S.value]},o.value):null,f("span",{class:[`${v}-base-slot-machine-current-number`,N.value]},f("span",{ref:"numberWrapper",class:[`${v}-base-slot-machine-current-number__inner`,typeof s.value!="number"&&`${v}-base-slot-machine-current-number__inner--not-number`]},a.value)),o.value!==null?f("span",{class:[`${v}-base-slot-machine-old-number ${v}-base-slot-machine-old-number--bottom`,S.value]},o.value):null)}}}),{cubicBezierEaseOut:F}=ge;function We({duration:s=".2s"}={}){return[T("&.fade-up-width-expand-transition-leave-active",{transition:`
 opacity ${s} ${F},
 max-width ${s} ${F},
 transform ${s} ${F}
 `}),T("&.fade-up-width-expand-transition-enter-active",{transition:`
 opacity ${s} ${F},
 max-width ${s} ${F},
 transform ${s} ${F}
 `}),T("&.fade-up-width-expand-transition-enter-to",{opacity:1,transform:"translateX(0) translateY(0)"}),T("&.fade-up-width-expand-transition-enter-from",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"}),T("&.fade-up-width-expand-transition-leave-from",{opacity:1,transform:"translateY(0)"}),T("&.fade-up-width-expand-transition-leave-to",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"})]}const Ke=T([T("@keyframes n-base-slot-machine-fade-up-in",`
 from {
 transform: translateY(60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),T("@keyframes n-base-slot-machine-fade-down-in",`
 from {
 transform: translateY(-60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),T("@keyframes n-base-slot-machine-fade-up-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(-60%);
 opacity: 0;
 }
 `),T("@keyframes n-base-slot-machine-fade-down-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(60%);
 opacity: 0;
 }
 `),D("base-slot-machine",`
 overflow: hidden;
 white-space: nowrap;
 display: inline-block;
 height: 18px;
 line-height: 18px;
 `,[D("base-slot-machine-number",`
 display: inline-block;
 position: relative;
 height: 18px;
 width: .6em;
 max-width: .6em;
 `,[We({duration:".2s"}),ye({duration:".2s",delay:"0s"}),D("base-slot-machine-old-number",`
 display: inline-block;
 opacity: 0;
 position: absolute;
 left: 0;
 right: 0;
 `,[P("top",{transform:"translateY(-100%)"}),P("bottom",{transform:"translateY(100%)"}),P("down-scroll",{animation:"n-base-slot-machine-fade-down-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),P("up-scroll",{animation:"n-base-slot-machine-fade-up-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1})]),D("base-slot-machine-current-number",`
 display: inline-block;
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 1;
 transform: translateY(0);
 width: .6em;
 `,[P("down-scroll",{animation:"n-base-slot-machine-fade-down-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),P("up-scroll",{animation:"n-base-slot-machine-fade-up-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),be("inner",`
 display: inline-block;
 position: absolute;
 right: 0;
 top: 0;
 width: .6em;
 `,[P("not-number",`
 right: unset;
 left: 0;
 `)])])])])]),Ge=Y({name:"BaseSlotMachine",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],default:0},max:{type:Number,default:void 0},appeared:{type:Boolean,required:!0}},setup(s){he("-base-slot-machine",Ke,J(s,"clsPrefix"));const m=w(),o=w(),a=M(()=>{if(typeof s.value=="string")return[];if(s.value<1)return[0];const r=[];let c=s.value;for(s.max!==void 0&&(c=Math.min(s.max,c));c>=1;)r.push(c%10),c/=10,c=Math.floor(c);return r.reverse(),r});return ae(J(s,"value"),(r,c)=>{typeof r=="string"?(o.value=void 0,m.value=void 0):typeof c=="string"?(o.value=r,m.value=void 0):(o.value=r,m.value=c)}),()=>{const{value:r,clsPrefix:c}=s;return typeof r=="number"?f("span",{class:`${c}-base-slot-machine`},f(we,{name:"fade-up-width-expand-transition",tag:"span"},{default:()=>a.value.map((N,S)=>f(oe,{clsPrefix:c,key:a.value.length-S-1,oldOriginalNumber:m.value,newOriginalNumber:o.value,value:N}))}),f(xe,{key:"+",width:!0},{default:()=>s.max!==void 0&&s.max<r?f(oe,{clsPrefix:c,value:"+"}):null})):f("span",{class:`${c}-base-slot-machine`},r)}}});function Xe(s){const{errorColor:m,infoColor:o,successColor:a,warningColor:r,fontFamily:c}=s;return{color:m,colorInfo:o,colorSuccess:a,colorError:m,colorWarning:r,fontSize:"12px",fontFamily:c}}const Ze={common:_e,self:Xe},He=T([T("@keyframes badge-wave-spread",{from:{boxShadow:"0 0 0.5px 0px var(--n-ripple-color)",opacity:.6},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)",opacity:0}}),D("badge",`
 display: inline-flex;
 position: relative;
 vertical-align: middle;
 font-family: var(--n-font-family);
 `,[P("as-is",[D("badge-sup",{position:"static",transform:"translateX(0)"},[ne({transformOrigin:"left bottom",originalTransform:"translateX(0)"})])]),P("dot",[D("badge-sup",`
 height: 8px;
 width: 8px;
 padding: 0;
 min-width: 8px;
 left: 100%;
 bottom: calc(100% - 4px);
 `,[T("::before","border-radius: 4px;")])]),D("badge-sup",`
 background: var(--n-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: #FFF;
 position: absolute;
 height: 18px;
 line-height: 18px;
 border-radius: 9px;
 padding: 0 6px;
 text-align: center;
 font-size: var(--n-font-size);
 transform: translateX(-50%);
 left: 100%;
 bottom: calc(100% - 9px);
 font-variant-numeric: tabular-nums;
 z-index: 2;
 display: flex;
 align-items: center;
 `,[ne({transformOrigin:"left bottom",originalTransform:"translateX(-50%)"}),D("base-wave",{zIndex:1,animationDuration:"2s",animationIterationCount:"infinite",animationDelay:"1s",animationTimingFunction:"var(--n-ripple-bezier)",animationName:"badge-wave-spread"}),T("&::before",`
 opacity: 0;
 transform: scale(1);
 border-radius: 9px;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)])])]),Je=Object.assign(Object.assign({},ue.props),{value:[String,Number],max:Number,dot:Boolean,type:{type:String,default:"default"},show:{type:Boolean,default:!0},showZero:Boolean,processing:Boolean,color:String,offset:Array}),Qe=Y({name:"Badge",props:Je,setup(s,{slots:m}){const{mergedClsPrefixRef:o,inlineThemeDisabled:a,mergedRtlRef:r}=Ne(s),c=ue("Badge","-badge",He,Ze,s,o),N=w(!1),S=()=>{N.value=!0},U=()=>{N.value=!1},C=M(()=>s.show&&(s.dot||s.value!==void 0&&!(!s.showZero&&Number(s.value)<=0)||!Oe(m.value)));de(()=>{C.value&&(N.value=!0)});const v=Se("Badge",r,o),b=M(()=>{const{type:y,color:_}=s,{common:{cubicBezierEaseInOut:k,cubicBezierEaseOut:u},self:{[Ie("color",y)]:B,fontFamily:q,fontSize:d}}=c.value;return{"--n-font-size":d,"--n-font-family":q,"--n-color":_||B,"--n-ripple-color":_||B,"--n-bezier":k,"--n-ripple-bezier":u}}),x=a?Ee("badge",M(()=>{let y="";const{type:_,color:k}=s;return _&&(y+=_[0]),k&&(y+=$e(k)),y}),b,s):void 0,V=M(()=>{const{offset:y}=s;if(!y)return;const[_,k]=y,u=typeof _=="number"?`${_}px`:_,B=typeof k=="number"?`${k}px`:k;return{transform:`translate(calc(${v!=null&&v.value?"50%":"-50%"} + ${u}), ${B})`}});return{rtlEnabled:v,mergedClsPrefix:o,appeared:N,showBadge:C,handleAfterEnter:S,handleAfterLeave:U,cssVars:a?void 0:b,themeClass:x==null?void 0:x.themeClass,onRender:x==null?void 0:x.onRender,offsetStyle:V}},render(){var s;const{mergedClsPrefix:m,onRender:o,themeClass:a,$slots:r}=this;o==null||o();const c=(s=r.default)===null||s===void 0?void 0:s.call(r);return f("div",{class:[`${m}-badge`,this.rtlEnabled&&`${m}-badge--rtl`,a,{[`${m}-badge--dot`]:this.dot,[`${m}-badge--as-is`]:!c}],style:this.cssVars},c,f(ke,{name:"fade-in-scale-up-transition",onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>this.showBadge?f("sup",{class:`${m}-badge-sup`,title:Le(this.value),style:this.offsetStyle},Ce(r.value,()=>[this.dot?null:f(Ge,{clsPrefix:m,appeared:this.appeared,max:this.max,value:this.value})]),this.processing?f(Te,{clsPrefix:m}):null):null}))}}),ea={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},aa=Y({name:"EyeOutline",render:function(m,o){return Z(),te("svg",ea,o[0]||(o[0]=[A("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),A("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),ta={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},la=Y({name:"PricetagOutline",render:function(m,o){return Z(),te("svg",ta,o[0]||(o[0]=[A("path",{d:"M435.25 48h-122.9a14.46 14.46 0 0 0-10.2 4.2L56.45 297.9a28.85 28.85 0 0 0 0 40.7l117 117a28.85 28.85 0 0 0 40.7 0L459.75 210a14.46 14.46 0 0 0 4.2-10.2v-123a28.66 28.66 0 0 0-28.7-28.8z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),A("path",{d:"M384 160a32 32 0 1 1 32-32a32 32 0 0 1-32 32z",fill:"currentColor"},null,-1)]))}}),K=s=>new Promise(m=>setTimeout(m,s));let z=[{id:1,name:"一般玩家",type:"SYSTEM",remark:"系統預設，一般註冊會員",status:"ACTIVE",member_count:1200,is_system_default:!0},{id:2,name:"測試帳號",type:"SYSTEM",remark:"系統預設，內部測試使用",status:"ACTIVE",member_count:5,is_system_default:!0},{id:3,name:"幣商帳號",type:"SYSTEM",remark:"系統預設，代理或幣商",status:"ACTIVE",member_count:12,is_system_default:!0},{id:4,name:"VIP",type:"CUSTOM",remark:"高價值客戶",status:"ACTIVE",member_count:50},{id:5,name:"高風險",type:"CUSTOM",remark:"疑似套利或作弊",status:"ACTIVE",member_count:2},{id:6,name:"廣告號",type:"CUSTOM",remark:"發送垃圾訊息",status:"INACTIVE",member_count:0}];const L={getTags:async()=>(await K(300),{code:0,msg:"success",data:[...z]}),createTag:async(s,m)=>{if(await K(300),z.some(a=>a.name===s))return{code:400,msg:"標籤名稱已存在"};const o={id:Math.max(...z.map(a=>a.id))+1,name:s,type:"CUSTOM",remark:m,status:"ACTIVE",member_count:0};return z.push(o),{code:0,msg:"success",data:o}},updateTag:async(s,m)=>{await K(300);const o=z.find(a=>a.id===s);if(!o)return{code:404,msg:"標籤不存在"};if(o.is_system_default){if(m.name&&m.name!==o.name)return{code:403,msg:"系統預設標籤不可修改名稱"}}else if(m.name&&m.name!==o.name&&z.some(a=>a.name===m.name))return{code:400,msg:"標籤名稱已存在"};return m.status==="INACTIVE"&&o.member_count>0?{code:400,msg:"此標籤仍有玩家關聯，無法停用"}:(Object.assign(o,m),{code:0,msg:"success"})},deleteTag:async s=>{await K(300);const m=z.find(o=>o.id===s);return m?m.is_system_default?{code:403,msg:"系統預設標籤不可刪除"}:m.status==="ACTIVE"?{code:400,msg:"僅可刪除停用狀態的標籤"}:m.member_count>0?{code:400,msg:"尚有玩家使用此標籤，無法刪除"}:(z=z.filter(o=>o.id!==s),{code:0,msg:"success"}):{code:404,msg:"標籤不存在"}}},na={class:"flex justify-between items-center w-full pr-8"},sa={class:"flex justify-end gap-2"},ra=Y({__name:"TagManagementDrawer",props:{show:{type:Boolean}},emits:["update:show","change"],setup(s,{emit:m}){const o=s,a=m,r=me(),c=De(),N=M({get:()=>o.show,set:p=>a("update:show",p)}),S=w(!1),U=w([]),C=w(!1),v=w(!1),b=w(!1),x=w(null),V=w(!1),y=G({name:"",remark:""}),_=M(()=>b.value?"編輯標籤":"新增標籤"),k=[{title:"類型",key:"type",width:100,render:p=>f(ee,{type:p.type==="SYSTEM"?"info":"success",bordered:!1},{default:()=>p.type==="SYSTEM"?"系統預設":"自定義"})},{title:"名稱",key:"name",width:120},{title:"備註",key:"remark",ellipsis:{tooltip:!0}},{title:"啟用",key:"status",width:80,render:p=>f(X,{value:p.status==="ACTIVE",onUpdateValue:g=>B(p,g)})},{title:"操作",key:"actions",width:120,render(p){return f(ve,{},{default:()=>[f($,{size:"tiny",secondary:!0,onClick:()=>d(p)},{icon:()=>f(ze)}),f($,{size:"tiny",type:"error",secondary:!0,disabled:p.type==="SYSTEM"||p.status==="ACTIVE",onClick:()=>n(p)},{icon:()=>f(Pe)})]})}}],u=async()=>{S.value=!0;try{const p=await L.getTags();p.code===0&&(U.value=p.data)}finally{S.value=!1}},B=async(p,g)=>{const O=g?"ACTIVE":"INACTIVE";if(!g&&p.member_count>0){r.error(`此標籤仍有 ${p.member_count} 位玩家使用，無法停用`);return}try{const H=await L.updateTag(p.id,{status:O});H.code===0?(p.status=O,r.success("狀態已更新"),a("change")):r.error(H.msg)}catch{r.error("更新失敗")}},q=()=>{b.value=!1,V.value=!1,x.value=null,y.name="",y.remark="",C.value=!0},d=p=>{b.value=!0,V.value=p.type==="SYSTEM",x.value=p.id,y.name=p.name,y.remark=p.remark,C.value=!0},t=async()=>{if(!y.name){r.warning("請輸入名稱");return}v.value=!0;try{let p;b.value&&x.value?p=await L.updateTag(x.value,{name:y.name,remark:y.remark}):p=await L.createTag(y.name,y.remark),p.code===0?(r.success(b.value?"已儲存":"已新增"),C.value=!1,u(),a("change")):r.error(p.msg)}catch{r.error("操作失敗")}finally{v.value=!1}},n=p=>{c.warning({title:"確認刪除",content:`確定要刪除標籤「${p.name}」嗎？`,positiveText:"刪除",negativeText:"取消",onPositiveClick:async()=>{try{const g=await L.deleteTag(p.id);g.code===0?(r.success("刪除成功"),u(),a("change")):r.error(g.msg)}catch{r.error("刪除失敗")}}})};return ae(N,p=>{p&&u()}),(p,g)=>(Z(),Me(e(Ve),{show:N.value,"onUpdate:show":g[4]||(g[4]=O=>N.value=O),width:600,placement:"right"},{default:i(()=>[l(e(Be),{title:"會員標籤管理",closable:""},{header:i(()=>[A("div",na,[g[6]||(g[6]=A("span",{class:"text-lg font-bold"},"會員標籤管理",-1)),l(e($),{type:"primary",size:"small",onClick:q},{icon:i(()=>[l(e(ce))]),default:i(()=>[g[5]||(g[5]=E(" 新增標籤 ",-1))]),_:1})])]),default:i(()=>[l(e(fe),{columns:k,data:U.value,loading:S.value,pagination:!1,class:"mb-4"},null,8,["data","loading"])]),_:1}),l(e(pe),{show:C.value,"onUpdate:show":g[3]||(g[3]=O=>C.value=O),preset:"card",title:_.value,style:{width:"400px"}},{footer:i(()=>[A("div",sa,[l(e($),{onClick:g[2]||(g[2]=O=>C.value=!1)},{default:i(()=>[...g[7]||(g[7]=[E("取消",-1)])]),_:1}),l(e($),{type:"primary",loading:v.value,onClick:t},{default:i(()=>[...g[8]||(g[8]=[E("儲存",-1)])]),_:1},8,["loading"])])]),default:i(()=>[l(e(Q),{ref:"formRef",model:y,"label-placement":"left","label-width":"60"},{default:i(()=>[l(e(h),{label:"名稱",path:"name",required:""},{default:i(()=>[l(e(I),{value:y.name,"onUpdate:value":g[0]||(g[0]=O=>y.name=O),placeholder:"請輸入標籤名稱",disabled:V.value&&b.value},null,8,["value","disabled"])]),_:1}),l(e(h),{label:"備註",path:"remark"},{default:i(()=>[l(e(I),{value:y.remark,"onUpdate:value":g[1]||(g[1]=O=>y.remark=O),type:"textarea",placeholder:"請輸入備註"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])]),_:1},8,["show"]))}}),ia={class:"p-6"},oa={class:"flex gap-2"},ua={class:"relative"},da={class:"relative"},ma={class:"flex justify-end gap-2"},qa=Y({__name:"PlayerList",setup(s){const m=Re(),o=me(),{t:a}=Ae(),r=G({q:"",search_type:"id",affiliation_type:"invite_code",affiliation_query:"",status:void 0,tags:void 0,register_date_start:void 0,register_date_end:void 0,page:1,page_size:10}),c=w(null),N=M(()=>[{label:a("player.status.ACTIVE"),value:"ACTIVE"},{label:a("player.status.LOCKED"),value:"LOCKED"},{label:a("player.status.FROZEN"),value:"FROZEN"},{label:a("player.status.SUSPENDED"),value:"SUSPENDED"}]),S=w([]),U=w(!1),C=async()=>{try{const d=await L.getTags();d.code===0&&(S.value=d.data.filter(t=>t.status==="ACTIVE").map(t=>({label:a(`player.tags.${t.name}`,t.name),value:t.name})))}catch{console.error("Failed to load tags")}},v=w(!1),b=w([]),x=G({page:1,pageSize:10,itemCount:0,showSizePicker:!0,pageSizes:[10,20,50],onChange:d=>{x.page=d,r.page=d,_()},onUpdatePageSize:d=>{x.pageSize=d,x.page=1,r.page_size=d,r.page=1,_()}}),V=d=>{if(!d)return"-";const t=new Date(d),n=p=>p.toString().padStart(2,"0");return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())} ${n(t.getHours())}:${n(t.getMinutes())}:${n(t.getSeconds())}`},y=M(()=>[{title:a("player.list.id"),key:"id",width:120},{title:a("player.list.username"),key:"username",width:150},{title:a("player.list.displayName"),key:"display_name",width:150},{title:a("player.list.tags"),key:"tags",render(d){return d.tags.map(t=>{const n=a(`player.tags.${t}`,t);return f(ee,{style:{marginRight:"6px"},type:t==="TEST"?"warning":"default"},{default:()=>n})})}},{title:a("navigation.rtp"),key:"rtp",width:100,render(d){return d.rtp===void 0?"-":f("span",{class:d.rtp<100?"text-green-600":"text-red-600"},`${d.rtp}%`)}},{title:a("navigation.vipLevel"),key:"vip_level",width:100},{title:a("player.list.accountStatus"),key:"status",width:100,render(d){return f(ee,{type:{ACTIVE:"success",LOCKED:"warning",FROZEN:"info",SUSPENDED:"error"}[d.status]||"default",bordered:!1},{default:()=>a(`player.status.${d.status}`)})}},{title:a("player.list.onlineStatus"),key:"is_online",width:100,render(d){return f(Qe,{dot:!0,type:d.is_online?"success":"default",style:{marginRight:"5px"}},()=>f("span",d.is_online?a("common.online"):a("common.offline")))}},{title:a("player.list.registerAt"),key:"register_at",width:180,render(d){return V(d.register_at)}},{title:a("common.action"),key:"actions",width:200,fixed:"right",render(d){return f(ve,{},{default:()=>[f($,{size:"small",secondary:!0,onClick:()=>m.push(`/admin/players/${d.id}`)},{icon:()=>f(aa)}),f($,{size:"small",secondary:!0,onClick:()=>o.info(a("player.list.jumpToAssetLog"))},{icon:()=>f(qe)}),f($,{size:"small",secondary:!0,onClick:()=>o.info(a("player.list.jumpToGameLog"))},{icon:()=>f(je)})]})}}]),_=async()=>{v.value=!0;try{const d=await se.getPlayers(r);d.code===0&&d.data?(b.value=d.data.items,x.itemCount=d.data.total):o.error(d.msg)}catch{o.error(a("common.loadFailed"))}finally{v.value=!1}},k=w(!1),u=G({username:"",display_name:"",tags:["測試帳號"],phone:"",gender:void 0,birthday:void 0,email:"",password:"",vip_level:0,is_muted:!1,is_gift_disabled:!1,is_retention_active:!1,referrer_id:""}),B=async()=>{if(!u.username||!u.display_name){o.warning(a("common.fillRequired"));return}try{const d=await se.createPlayer({username:u.username,display_name:u.display_name,password:u.password,phone:u.phone,gender:u.gender,birthday:u.birthday,email:u.email,vip_level:u.vip_level,is_muted:u.is_muted,is_gift_disabled:u.is_gift_disabled,is_retention_active:u.is_retention_active,referrer_id:u.referrer_id,tags:u.tags});d.code===0?(o.success(a("player.list.createSuccess")),k.value=!1,_()):o.error(d.msg)}catch{o.error(a("player.list.createFailed"))}},q=[{label:a("player.gender.MALE"),value:"MALE"},{label:a("player.gender.FEMALE"),value:"FEMALE"},{label:a("player.gender.UNKNOWN"),value:"UNKNOWN"}];return de(()=>{C(),_()}),(d,t)=>(Z(),te("div",ia,[l(e(Ue),{title:e(a)("navigation.playerManagement"),class:"mb-6"},{"header-extra":i(()=>[A("div",oa,[l(e($),{secondary:"",onClick:t[0]||(t[0]=n=>U.value=!0)},{icon:i(()=>[l(e(la))]),default:i(()=>[E(" "+R(e(a)("player.list.tagManagement")),1)]),_:1}),l(e($),{type:"primary",onClick:t[1]||(t[1]=n=>k.value=!0)},{icon:i(()=>[l(e(ce))]),default:i(()=>[E(" "+R(e(a)("player.list.addTestPlayer")),1)]),_:1})])]),default:i(()=>[l(e(Q),{inline:"",model:r,"label-placement":"left",class:"flex-wrap gap-4 mt-4"},{default:i(()=>[l(e(h),{label:e(a)("common.search")},{default:i(()=>[A("div",ua,[l(e(ie),{value:r.search_type,"onUpdate:value":t[2]||(t[2]=n=>r.search_type=n),name:"searchType",size:"small",class:"absolute -top-7 left-0 whitespace-nowrap"},{default:i(()=>[l(e(j),{value:"id"},{default:i(()=>[E(R(e(a)("common.id")),1)]),_:1}),l(e(j),{value:"username"},{default:i(()=>[E(R(e(a)("auth.username")),1)]),_:1}),l(e(j),{value:"phone"},{default:i(()=>[E(R(e(a)("common.phone")),1)]),_:1})]),_:1},8,["value"]),l(e(I),{value:r.q,"onUpdate:value":t[3]||(t[3]=n=>r.q=n),placeholder:e(a)("common.keywordPlaceholder")},null,8,["value","placeholder"])])]),_:1},8,["label"]),l(e(h),{label:e(a)("navigation.affiliation")},{default:i(()=>[A("div",da,[l(e(ie),{value:r.affiliation_type,"onUpdate:value":t[4]||(t[4]=n=>r.affiliation_type=n),name:"affiliationType",size:"small",class:"absolute -top-7 left-0 whitespace-nowrap"},{default:i(()=>[l(e(j),{value:"invite_code"},{default:i(()=>[E(R(e(a)("navigation.inviteCode")),1)]),_:1}),l(e(j),{value:"referrer_id"},{default:i(()=>[E(R(e(a)("navigation.referrerId")),1)]),_:1})]),_:1},8,["value"]),l(e(I),{value:r.affiliation_query,"onUpdate:value":t[5]||(t[5]=n=>r.affiliation_query=n),placeholder:e(a)("common.inputPlaceholder")},null,8,["value","placeholder"])])]),_:1},8,["label"]),l(e(h),{label:e(a)("common.status")},{default:i(()=>[l(e(W),{value:r.status,"onUpdate:value":t[6]||(t[6]=n=>r.status=n),options:N.value,placeholder:e(a)("common.all"),clearable:"",style:{width:"120px"}},null,8,["value","options","placeholder"])]),_:1},8,["label"]),l(e(h),{label:e(a)("player.list.tags")},{default:i(()=>[l(e(W),{value:r.tags,"onUpdate:value":t[7]||(t[7]=n=>r.tags=n),options:S.value,multiple:"",placeholder:e(a)("common.all"),clearable:"",style:{width:"180px"}},null,8,["value","options","placeholder"])]),_:1},8,["label"]),l(e(h),{label:e(a)("player.list.registerIp")},{default:i(()=>[l(e(I),{value:r.register_ip,"onUpdate:value":t[8]||(t[8]=n=>r.register_ip=n),placeholder:e(a)("common.keywordPlaceholder"),style:{width:"150px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(h),{label:e(a)("player.list.registerDate")},{default:i(()=>[l(e(re),{value:c.value,"onUpdate:value":[t[9]||(t[9]=n=>c.value=n),t[10]||(t[10]=([n,p])=>{r.register_date_start=n?new Date(n).toISOString():void 0,r.register_date_end=p?new Date(p).toISOString():void 0})],type:"daterange",clearable:""},null,8,["value"])]),_:1},8,["label"]),l(e(h),null,{default:i(()=>[l(e($),{type:"primary","attr-type":"button",onClick:_},{icon:i(()=>[l(e(Ye))]),default:i(()=>[E(" "+R(e(a)("common.search")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"]),l(e(fe),{remote:"",loading:v.value,columns:y.value,data:b.value,pagination:x,bordered:!1,"single-line":!1},null,8,["loading","columns","data","pagination"]),l(e(pe),{show:k.value,"onUpdate:show":t[25]||(t[25]=n=>k.value=n),preset:"card",title:e(a)("player.list.addTestAccount"),style:{width:"500px"}},{footer:i(()=>[A("div",ma,[l(e($),{onClick:t[24]||(t[24]=n=>k.value=!1)},{default:i(()=>[E(R(e(a)("common.cancel")),1)]),_:1}),l(e($),{type:"primary",onClick:B},{default:i(()=>[E(R(e(a)("common.create")),1)]),_:1})])]),default:i(()=>[l(e(Q),{ref:"createFormRef",model:u,"label-placement":"left","label-width":"80"},{default:i(()=>[l(e(h),{label:e(a)("auth.username"),path:"username",required:""},{default:i(()=>[l(e(I),{value:u.username,"onUpdate:value":t[11]||(t[11]=n=>u.username=n),placeholder:e(a)("auth.username")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(h),{label:e(a)("player.list.displayName"),path:"display_name",required:""},{default:i(()=>[l(e(I),{value:u.display_name,"onUpdate:value":t[12]||(t[12]=n=>u.display_name=n),placeholder:e(a)("player.list.nicknamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(e(h),{label:"手機號碼"},{default:i(()=>[l(e(I),{value:u.phone,"onUpdate:value":t[13]||(t[13]=n=>u.phone=n),placeholder:"0912xxxxxx"},null,8,["value"])]),_:1}),l(e(h),{label:e(a)("player.list.gender")},{default:i(()=>[l(e(W),{value:u.gender,"onUpdate:value":t[14]||(t[14]=n=>u.gender=n),options:q,clearable:"",style:{width:"140px"}},null,8,["value"])]),_:1},8,["label"]),l(e(h),{label:e(a)("player.list.birthday")},{default:i(()=>[l(e(re),{"formatted-value":u.birthday,"onUpdate:formattedValue":t[15]||(t[15]=n=>u.birthday=n),"value-format":"yyyy-MM-dd",type:"date",clearable:""},null,8,["formatted-value"])]),_:1},8,["label"]),l(e(h),{label:e(a)("player.list.email")},{default:i(()=>[l(e(I),{value:u.email,"onUpdate:value":t[16]||(t[16]=n=>u.email=n),placeholder:"email@example.com"},null,8,["value"])]),_:1},8,["label"]),l(e(h),{label:"密碼"},{default:i(()=>[l(e(I),{value:u.password,"onUpdate:value":t[17]||(t[17]=n=>u.password=n),type:"password","show-password-on":"click",placeholder:"留空則系統自動產生",clearable:""},null,8,["value"])]),_:1}),l(e(h),{label:e(a)("player.list.vipLevel")},{default:i(()=>[l(e(Fe),{value:u.vip_level,"onUpdate:value":t[18]||(t[18]=n=>u.vip_level=n),min:0,style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"]),l(e(h),{label:"全服禁言"},{default:i(()=>[l(e(X),{value:u.is_muted,"onUpdate:value":t[19]||(t[19]=n=>u.is_muted=n)},null,8,["value"])]),_:1}),l(e(h),{label:"禁止贈禮"},{default:i(()=>[l(e(X),{value:u.is_gift_disabled,"onUpdate:value":t[20]||(t[20]=n=>u.is_gift_disabled=n)},null,8,["value"])]),_:1}),l(e(h),{label:e(a)("player.list.retentionCheck")},{default:i(()=>[l(e(X),{value:u.is_retention_active,"onUpdate:value":t[21]||(t[21]=n=>u.is_retention_active=n)},null,8,["value"])]),_:1},8,["label"]),l(e(h),{label:"推薦人 ID"},{default:i(()=>[l(e(I),{value:u.referrer_id,"onUpdate:value":t[22]||(t[22]=n=>u.referrer_id=n),placeholder:"Referrer ID"},null,8,["value"])]),_:1}),l(e(h),{label:e(a)("player.list.tags")},{default:i(()=>[l(e(W),{value:u.tags,"onUpdate:value":t[23]||(t[23]=n=>u.tags=n),multiple:"",options:S.value},null,8,["value","options"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title"]),l(ra,{show:U.value,"onUpdate:show":t[26]||(t[26]=n=>U.value=n),onChange:C},null,8,["show"])]))}});export{qa as default};
